2021-10-04 15:00:07.387  INFO 14904 --- [main] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 1889 ms
2021-10-04 15:00:07.479 DEBUG 14904 --- [main] org.apache.ibatis.logging.LogFactory     : Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter.
2021-10-04 15:00:07.536 DEBUG 14904 --- [main] org.apache.ibatis.io.VFS                 : Using VFS adapter org.mybatis.spring.boot.autoconfigure.SpringBootVFS
2021-10-04 15:00:07.614 ERROR 14904 --- [main] org.dromara.hmily.spi.ExtensionLoader    : not found service provider for : org.dromara.hmily.core.service.HmilyTransactionHandlerRegistry
2021-10-04 15:12:30.078  INFO 3356 --- [main] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 1943 ms
2021-10-04 15:12:30.165 DEBUG 3356 --- [main] org.apache.ibatis.logging.LogFactory     : Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter.
2021-10-04 15:12:30.212 DEBUG 3356 --- [main] org.apache.ibatis.io.VFS                 : Using VFS adapter org.mybatis.spring.boot.autoconfigure.SpringBootVFS
2021-10-04 15:12:30.278 ERROR 3356 --- [main] org.dromara.hmily.spi.ExtensionLoader    : not found service provider for : org.dromara.hmily.core.service.HmilyTransactionHandlerRegistry
2021-10-04 15:14:24.973 ERROR 3356 --- [hmily-disruptor_consumer_HmilyTransactionEventConsumer-6] o.d.h.t.e.HmilyTccTransactionExecutor    : HmilyParticipant cancel exception :HmilyParticipant(participantId=-9102669150893408255, participantRefId=null, transId=-9102669150893408256, transType=TCC, status=0, appName=null, role=1, retry=0, targetClass=com.example.dubboaccount.service.AccountServiceImpl, targetMethod=incrAccountException, confirmMethod=confirmIncrAccount, cancelMethod=cancelIncrAmount, version=1, createTime=Mon Oct 04 15:14:24 CST 2021, updateTime=Mon Oct 04 15:14:24 CST 2021, confirmHmilyInvocation=HmilyInvocation(targetClass=interface com.example.dubbocommon.account.api.AccountService, methodName=incrAccountException, parameterTypes=[class com.example.dubbocommon.account.dto.AccountDTO], args=[AccountDTO(userId=1, accountType=2, amount=1.00)]), cancelHmilyInvocation=HmilyInvocation(targetClass=interface com.example.dubbocommon.account.api.AccountService, methodName=incrAccountException, parameterTypes=[class com.example.dubbocommon.account.dto.AccountDTO], args=[AccountDTO(userId=1, accountType=2, amount=1.00)]))

java.lang.reflect.InvocationTargetException: null
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_241]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_241]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_241]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_241]
	at org.apache.commons.lang3.reflect.MethodUtils.invokeMethod(MethodUtils.java:230) ~[commons-lang3-3.8.1.jar:3.8.1]
	at org.apache.commons.lang3.reflect.MethodUtils.invokeMethod(MethodUtils.java:256) ~[commons-lang3-3.8.1.jar:3.8.1]
	at org.dromara.hmily.core.reflect.HmilyReflector.executeLocal(HmilyReflector.java:82) ~[hmily-core-2.1.2-SNAPSHOT.jar:na]
	at org.dromara.hmily.core.reflect.HmilyReflector.executor(HmilyReflector.java:59) ~[hmily-core-2.1.2-SNAPSHOT.jar:na]
	at org.dromara.hmily.tcc.executor.HmilyTccTransactionExecutor.globalCancel(HmilyTccTransactionExecutor.java:205) ~[hmily-tcc-2.1.2-SNAPSHOT.jar:na]
	at org.dromara.hmily.tcc.handler.StarterHmilyTccTransactionHandler.lambda$handleTransaction$0(StarterHmilyTccTransactionHandler.java:79) [hmily-tcc-2.1.2-SNAPSHOT.jar:na]
	at org.dromara.hmily.core.disruptor.handler.HmilyTransactionEventConsumer.execute(HmilyTransactionEventConsumer.java:22) ~[hmily-core-2.1.2-SNAPSHOT.jar:na]
	at org.dromara.hmily.core.disruptor.handler.HmilyTransactionEventConsumer.execute(HmilyTransactionEventConsumer.java:13) ~[hmily-core-2.1.2-SNAPSHOT.jar:na]
	at org.dromara.hmily.core.disruptor.HmilyDisruptorWorkHandler.onEvent(HmilyDisruptorWorkHandler.java:38) ~[hmily-core-2.1.2-SNAPSHOT.jar:na]
	at org.dromara.hmily.core.disruptor.HmilyDisruptorWorkHandler.onEvent(HmilyDisruptorWorkHandler.java:27) ~[hmily-core-2.1.2-SNAPSHOT.jar:na]
	at com.lmax.disruptor.WorkProcessor.run(WorkProcessor.java:143) ~[disruptor-3.4.0.jar:na]
	at java.lang.Thread.run(Thread.java:748) ~[na:1.8.0_241]
Caused by: org.springframework.jdbc.BadSqlGrammarException: 
### Error updating database.  Cause: java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '1 1.00, pre_incr_amount = pre_incr_amount - 1.00, modify_time = now() where user' at line 1
### The error may involve com.example.dubbocommon.account.mapper.AccountMapper.cancelIncrAmount-Inline
### The error occurred while setting parameters
### SQL: update t_account set total_amount = total_amount 1 ?, pre_incr_amount = pre_incr_amount - ?, modify_time = now() where user_id = ? and account_type = ? and pre_incr_amount >= ? and total_amount >= ?
### Cause: java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '1 1.00, pre_incr_amount = pre_incr_amount - 1.00, modify_time = now() where user' at line 1
; bad SQL grammar []; nested exception is java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '1 1.00, pre_incr_amount = pre_incr_amount - 1.00, modify_time = now() where user' at line 1
	at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:234) ~[spring-jdbc-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:72) ~[spring-jdbc-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:73) ~[mybatis-spring-1.3.2.jar:1.3.2]
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:446) ~[mybatis-spring-1.3.2.jar:1.3.2]
	at com.sun.proxy.$Proxy78.update(Unknown Source) ~[na:na]
	at org.mybatis.spring.SqlSessionTemplate.update(SqlSessionTemplate.java:294) ~[mybatis-spring-1.3.2.jar:1.3.2]
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:63) ~[mybatis-3.4.6.jar:3.4.6]
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:59) ~[mybatis-3.4.6.jar:3.4.6]
	at com.sun.proxy.$Proxy81.cancelIncrAmount(Unknown Source) ~[na:na]
	at com.example.dubboaccount.service.AccountServiceImpl.cancelIncrAmount(AccountServiceImpl.java:98) ~[classes/:na]
	at com.example.dubboaccount.service.AccountServiceImpl$$FastClassBySpringCGLIB$$65cc39ef.invoke(<generated>) ~[classes/:na]
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218) ~[spring-core-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:749) ~[spring-aop-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) ~[spring-aop-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:294) ~[spring-tx-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:98) ~[spring-tx-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:93) ~[spring-aop-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186) ~[spring-aop-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:688) ~[spring-aop-5.1.3.RELEASE.jar:5.1.3.RELEASE]
	at com.example.dubboaccount.service.AccountServiceImpl$$EnhancerBySpringCGLIB$$6f2fe028.cancelIncrAmount(<generated>) ~[classes/:na]
	... 16 common frames omitted
Caused by: java.sql.SQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '1 1.00, pre_incr_amount = pre_incr_amount - 1.00, modify_time = now() where user' at line 1
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:120) ~[mysql-connector-java-8.0.22.jar:8.0.22]
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97) ~[mysql-connector-java-8.0.22.jar:8.0.22]
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122) ~[mysql-connector-java-8.0.22.jar:8.0.22]
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953) ~[mysql-connector-java-8.0.22.jar:8.0.22]
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370) ~[mysql-connector-java-8.0.22.jar:8.0.22]
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44) ~[HikariCP-3.2.0.jar:na]
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java) ~[HikariCP-3.2.0.jar:na]
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:46) ~[mybatis-3.4.6.jar:3.4.6]
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74) ~[mybatis-3.4.6.jar:3.4.6]
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50) ~[mybatis-3.4.6.jar:3.4.6]
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117) ~[mybatis-3.4.6.jar:3.4.6]
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76) ~[mybatis-3.4.6.jar:3.4.6]
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:198) ~[mybatis-3.4.6.jar:3.4.6]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.8.0_241]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[na:1.8.0_241]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:1.8.0_241]
	at java.lang.reflect.Method.invoke(Method.java:498) ~[na:1.8.0_241]
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:433) ~[mybatis-spring-1.3.2.jar:1.3.2]
	... 33 common frames omitted

2021-10-04 15:20:47.406  INFO 8060 --- [main] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 1828 ms
2021-10-04 15:20:47.482 DEBUG 8060 --- [main] org.apache.ibatis.logging.LogFactory     : Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter.
2021-10-04 15:20:47.532 DEBUG 8060 --- [main] org.apache.ibatis.io.VFS                 : Using VFS adapter org.mybatis.spring.boot.autoconfigure.SpringBootVFS
2021-10-04 15:20:47.595 ERROR 8060 --- [main] org.dromara.hmily.spi.ExtensionLoader    : not found service provider for : org.dromara.hmily.core.service.HmilyTransactionHandlerRegistry
2021-10-04 15:25:26.325  INFO 20356 --- [main] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 1823 ms
2021-10-04 15:25:26.409 DEBUG 20356 --- [main] org.apache.ibatis.logging.LogFactory     : Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter.
2021-10-04 15:25:26.465 DEBUG 20356 --- [main] org.apache.ibatis.io.VFS                 : Using VFS adapter org.mybatis.spring.boot.autoconfigure.SpringBootVFS
2021-10-04 15:25:26.528 ERROR 20356 --- [main] org.dromara.hmily.spi.ExtensionLoader    : not found service provider for : org.dromara.hmily.core.service.HmilyTransactionHandlerRegistry
2021-10-04 15:41:39.338  INFO 19944 --- [main] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 2032 ms
2021-10-04 15:41:39.457 DEBUG 19944 --- [main] org.apache.ibatis.logging.LogFactory     : Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter.
2021-10-04 15:41:39.503 DEBUG 19944 --- [main] org.apache.ibatis.io.VFS                 : Using VFS adapter org.mybatis.spring.boot.autoconfigure.SpringBootVFS
2021-10-04 15:41:39.578 ERROR 19944 --- [main] org.dromara.hmily.spi.ExtensionLoader    : not found service provider for : org.dromara.hmily.core.service.HmilyTransactionHandlerRegistry
2021-10-04 15:45:02.910  INFO 9904 --- [main] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 1805 ms
2021-10-04 15:45:02.995 DEBUG 9904 --- [main] org.apache.ibatis.logging.LogFactory     : Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter.
2021-10-04 15:45:03.035 DEBUG 9904 --- [main] org.apache.ibatis.io.VFS                 : Using VFS adapter org.mybatis.spring.boot.autoconfigure.SpringBootVFS
2021-10-04 15:45:03.102 ERROR 9904 --- [main] org.dromara.hmily.spi.ExtensionLoader    : not found service provider for : org.dromara.hmily.core.service.HmilyTransactionHandlerRegistry
2021-10-04 15:49:37.838  INFO 17456 --- [main] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 1900 ms
2021-10-04 15:49:37.927 DEBUG 17456 --- [main] org.apache.ibatis.logging.LogFactory     : Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter.
2021-10-04 15:49:37.981 DEBUG 17456 --- [main] org.apache.ibatis.io.VFS                 : Using VFS adapter org.mybatis.spring.boot.autoconfigure.SpringBootVFS
2021-10-04 15:49:38.050 ERROR 17456 --- [main] org.dromara.hmily.spi.ExtensionLoader    : not found service provider for : org.dromara.hmily.core.service.HmilyTransactionHandlerRegistry
2021-10-04 15:54:16.534  INFO 17340 --- [main] o.s.web.context.ContextLoader            : Root WebApplicationContext: initialization completed in 1819 ms
2021-10-04 15:54:16.639 DEBUG 17340 --- [main] org.apache.ibatis.logging.LogFactory     : Logging initialized using 'class org.apache.ibatis.logging.slf4j.Slf4jImpl' adapter.
2021-10-04 15:54:16.684 DEBUG 17340 --- [main] org.apache.ibatis.io.VFS                 : Using VFS adapter org.mybatis.spring.boot.autoconfigure.SpringBootVFS
2021-10-04 15:54:16.749 ERROR 17340 --- [main] org.dromara.hmily.spi.ExtensionLoader    : not found service provider for : org.dromara.hmily.core.service.HmilyTransactionHandlerRegistry
